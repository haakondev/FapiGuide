<!doctype html>
<html lang="no">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Markdown Viewer</title>

<style>

/* ================= THEME SYSTEM ================= */

:root {

  /* Primary option 1 and 2 */
  --primary-option-1: #bb86fc;
  --primary-option-2: #6200ee;
  --secondary: #03dac6;

  /* Light defaults */
  --bg: #ffffff;
  --surface: #ffffff;
  --text: rgba(0,0,0,.87);
  --muted: rgba(0,0,0,.65);
  --border: rgba(0,0,0,.18);
  --input-bg: #ffffff;
  --shadow: rgba(0,0,0,.08);

  --primary: var(--primary-option-2);
  --on-primary: #ffffff;

  --radius: 10px;
}

/* Auto follows system */
@media (prefers-color-scheme: dark) {
  body.theme-auto {

    --bg: #121212;
    --surface: #1e1e1e;
    --text: rgba(255,255,255,.92);
    --muted: rgba(255,255,255,.72);
    --border: rgba(255,255,255,.18);
    --input-bg: #1e1e1e;
    --shadow: rgba(0,0,0,.35);

    --primary: var(--primary-option-1);
    --on-primary: rgba(0,0,0,.92);
  }
}

/* Forced themes */
body.theme-light {

  --bg: #ffffff;
  --surface: #ffffff;
  --text: rgba(0,0,0,.87);
  --muted: rgba(0,0,0,.65);
  --border: rgba(0,0,0,.18);
  --input-bg: #ffffff;
  --shadow: rgba(0,0,0,.08);

  --primary: var(--primary-option-2);
  --on-primary: #ffffff;
}

body.theme-dark {

  --bg: #121212;
  --surface: #1e1e1e;
  --text: rgba(255,255,255,.92);
  --muted: rgba(255,255,255,.72);
  --border: rgba(255,255,255,.18);
  --input-bg: #1e1e1e;
  --shadow: rgba(0,0,0,.35);

  --primary: var(--primary-option-1);
  --on-primary: rgba(0,0,0,.92);
}

/* ================= BASE UI ================= */

* { box-sizing: border-box; }

body {
  margin: 16px;
  font-family: system-ui, Arial, sans-serif;
  background: var(--bg);
  color: var(--text);
}

h1 {
  font-size: 20px;
  margin: 0 0 12px;
}

.card {
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 12px;
  margin-bottom: 12px;
  background: var(--surface);
  box-shadow: 0 8px 24px var(--shadow);
  overflow: visible;
}

.key { font-weight: 600; }

.small {
  font-size: 12px;
  color: var(--muted);
}

/* Inputs */

input, textarea, select, button {
  padding: 9px 10px;
  border-radius: 8px;
  border: 1px solid var(--border);
  width: 100%;
  color: var(--text);
  background: var(--input-bg);
}

button {
  cursor: pointer;
  width: auto;
  background: transparent;
}

button.primary {
  background: var(--primary);
  border-color: transparent;
  color: var(--on-primary);
}

select {
  position: relative;
  z-index: 1000;
}

select option {
  background: var(--input-bg);
  color: var(--text);
}

input:focus,
textarea:focus,
select:focus,
button:focus {
  outline: 2px solid color-mix(in srgb, var(--primary) 70%, transparent);
  outline-offset: 2px;
}

/* ================= MARKDOWN ================= */

.md-content {
  line-height: 1.55;
}

.md-content a {
  color: var(--primary);
  text-decoration: none;
}

.md-content a:hover {
  text-decoration: underline;
}

/* Tip / Callout */

.md-content blockquote {

  margin: 12px 0;
  padding: 12px 16px;

  border-left: 5px solid var(--secondary);

  background: color-mix(in srgb, var(--surface) 92%, var(--secondary) 8%);

  border-radius: var(--radius);

  color: var(--text);

  box-shadow: 0 8px 24px var(--shadow);
}

.md-content blockquote p {
  margin: 0;
  font-style: normal;
}

.md-content blockquote strong {
  color: var(--text);
}

</style>
</head>

<body class="theme-auto">

<h1>Markdown Preview</h1>

<div class="card">
  <div class="key">Tema</div>

  <select id="themeSelect">
    <option value="auto">Auto</option>
    <option value="light">Light</option>
    <option value="dark">Dark</option>
  </select>

  <div class="small">Auto f√∏lger system</div>
</div>

<div class="card">
  <div id="content" class="md-content">Laster README.md</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<script>

const themeSelect = document.getElementById("themeSelect");

function applyTheme(mode) {
  document.body.classList.remove("theme-auto","theme-light","theme-dark");
  document.body.classList.add("theme-" + mode);
  localStorage.setItem("md_theme", mode);
}

themeSelect.addEventListener("change", () => {
  applyTheme(themeSelect.value);
});

(function initTheme() {
  const saved = localStorage.getItem("md_theme") || "auto";
  themeSelect.value = saved;
  applyTheme(saved);
})();

fetch("README.md")
  .then(r => r.text())
  .then(md => {
    document.getElementById("content").innerHTML = marked.parse(md);
  })
  .catch(() => {
    document.getElementById("content").textContent =
      "Fant ikke README.md. Legg README.md i samme mappe som HTML-filen.";
  });

</script>

</body>
</html>
